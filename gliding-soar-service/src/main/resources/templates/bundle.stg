import "common.stg"

bundle(model, root, arguments, version, when) ::= <<
<header(version, when, arguments)>

<root.children:childNamespace()>
<root.elements; separator="\n">

<topProcs()>
<namespace("glide", glideProcs())>
>>

header(version, when, arguments) ::= <<
# Glide v<version>
# Generated on <when>
#
<if(arguments)># Arguments: <arguments; separator=" "><endif>
#
# Autogenerated code, do not modify
>>

// NOTE: public=false because otherwise it would try to export the procs, which aren't in a namespace
topProcs() ::= <<
<proc(name="elaboration", args="args", public=false, body={<\\>
# TODO: Stub!<\\>
})>

<proc(name="proposal", args="args", public=false, body={<\\>
# TODO: Stub!<\\>
})>
>>

glideProcs() ::= <<
<proc(name="check-rhs", args="type", public=true, body={<\\>
# TODO: Stub!<\\>
})>

<proc(name="check-types", args="spec", public=true, body={<\\>
# TODO: Stub!<\\>
})>

<proc(name="claim-binding", args="binding type", public=true, body={<\\>
# TODO: Stub!<\\>
})>

<proc(name="check-i-modification", args="binding attribute type", public=true, body={<\\>
# TODO: Stub!<\\>
})>

<proc(name="check-o-modification", args="binding attribute type", public=true, body={<\\>
# TODO: Stub!<\\>
})>

<proc(name="state-binding", args="", public=true, body={<\\>
# TODO: Stub!
return "\<s>"<\\>
})>

>>

childNamespace(ns) ::= <<
<namespace(ns.name, {
<ns.children:childNamespace()>
<ns.elements; separator="\n">
})>
>>
